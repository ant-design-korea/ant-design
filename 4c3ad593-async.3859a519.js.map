{"version":3,"sources":["components/upload/demo/crop-image.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/upload/demo/crop-image.tsx?watch=parent';import React, { useState } from 'react';\nimport { Upload } from 'antd';\nimport type { GetProp, UploadFile, UploadProps } from 'antd';\nimport ImgCrop from 'antd-img-crop';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\n\nconst App: React.FC = () => {\n  const [fileList, setFileList] = useState<UploadFile[]>([\n    {\n      uid: '-1',\n      name: 'image.png',\n      status: 'done',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n  ]);\n\n  const onChange: UploadProps['onChange'] = ({ fileList: newFileList }) => {\n    setFileList(newFileList);\n  };\n\n  const onPreview = async (file: UploadFile) => {\n    let src = file.url as string;\n    if (!src) {\n      src = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file.originFileObj as FileType);\n        reader.onload = () => resolve(reader.result as string);\n      });\n    }\n    const image = new Image();\n    image.src = src;\n    const imgWindow = window.open(src);\n    imgWindow?.document.write(image.outerHTML);\n  };\n\n  return (\n    <ImgCrop rotationSlider>\n      <Upload\n        action=\"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload\"\n        listType=\"picture-card\"\n        fileList={fileList}\n        onChange={onChange}\n        onPreview={onPreview}\n      >\n        {fileList.length < 5 && '+ Upload'}\n      </Upload>\n    </ImgCrop>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"uOAmDA,+CAAA,4CAnDO,oBAA6H,gBAC7G,oBAEH,aAgDpB,EA5CsB,KACpB,GAAM,CAAC,EAAU,EAAY,CAAG,GAAA,UAAQ,EAAe,CACrD,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACR,IAAK,8EACP,EACD,EAMK,EAAY,MAAO,IACvB,IAAI,EAAM,EAAK,GAAG,CACb,GACH,CAAA,EAAM,MAAM,IAAI,QAAQ,AAAC,IACvB,IAAM,EAAS,IAAI,WACnB,EAAO,aAAa,CAAC,EAAK,aAAa,EACvC,EAAO,MAAM,CAAG,IAAM,EAAQ,EAAO,MAAM,EAC7C,EAAC,EAEH,IAAM,EAAQ,IAAI,MAClB,EAAM,GAAG,CAAG,EACZ,IAAM,EAAY,OAAO,IAAI,CAAC,SAC9B,GAAA,EAAW,QAAQ,CAAC,KAAK,CAAC,EAAM,SAAS,EAC3C,EAEA,MACE,UAAC,SAAO,EAAC,cAAc,aACrB,UAAC,QAAM,EACL,OAAO,yDACP,SAAS,eACT,SAAU,EACV,SAzBoC,CAAC,CAAE,SAAU,CAAW,CAAE,IAClE,EAAY,GACd,EAwBM,UAAW,WAEV,EAAS,MAAM,CAAG,GAAK,eAIhC"}