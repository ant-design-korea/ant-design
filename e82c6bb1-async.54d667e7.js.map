{"version":3,"sources":["docs/blog/to-be-what-you-see.zh-CN.md?type=text"],"sourcesContent":["\n  import '/home/runner/work/ant-design/ant-design/docs/blog/to-be-what-you-see.zh-CN.md?watch=parent';\n  export const texts = [{\"value\":\"在日常开发过程中，你是否思考过一个问题。那就是范围限定和实际值不同的时候，应该如何去处理？假设我们有一个展示组件，它很简单的将你的值进行展示：\",\"paraId\":0},{\"value\":\"interface StrProps {\\n  value: string;\\n}\\n\\nfunction MyStr({ value }: StrProps) {\\n  return <div>{value}</div>;\\n}\\n<MyStr value=\\\"Hello World\\\" />;\\n\",\"paraId\":1},{\"value\":\"毫无疑问，页面上就该展示 \",\"paraId\":2},{\"value\":\"Hello World\",\"paraId\":2},{\"value\":\"。接着，我们加个范围限定：\",\"paraId\":2},{\"value\":\"interface StrProps {\\n  value: string;\\n  maxLen?: number;\\n}\\n\",\"paraId\":3},{\"value\":\"这个时候如果我们使用了超出范围的值应该显示什么？\",\"paraId\":4},{\"value\":\"<MyStr value=\\\"Hello World\\\" maxLen={5}>\\n\",\"paraId\":5},{\"value\":\"“显而易见”，既然有了 \",\"paraId\":6},{\"value\":\"maxLen\",\"paraId\":6},{\"value\":\"，那么就应该显示 \",\"paraId\":6},{\"value\":\"Hello\",\"paraId\":6},{\"value\":\" 而非 \",\"paraId\":6},{\"value\":\"Hello World\",\"paraId\":6},{\"value\":\"。\",\"paraId\":6},{\"value\":\"但是这种直觉的处理方式，却并不是所有情况下都是正确的。如果你使用原生的 input，你就发现表现并不是这样的：\",\"paraId\":7},{\"value\":\"<input value=\\\"Hello World\\\" maxLength={5} />\\n\",\"paraId\":8},{\"value\":\"按照标准描述，\",\"paraId\":9},{\"value\":\"maxLength\",\"paraId\":9},{\"value\":\" 只限制用户输入。这是标准错了吗？\",\"paraId\":9},{\"value\":\"A form control maxlength attribute, controlled by the dirty value flag, declares a limit on the number of characters a user can input.\",\"paraId\":10},{\"value\":\"带着上面的疑问，我们想象一个输入场景。现在你有一个电商系统，给商品设定价格：\",\"paraId\":11,\"tocIndex\":0},{\"value\":\"<Form>\\n  <Form.Item label=\\\"Name\\\" name=\\\"name\\\">\\n    <Input />\\n  </Form.Item>\\n\\n  <Form.Item label=\\\"Price\\\" name=\\\"price\\\">\\n    <InputNumber />\\n  </Form.Item>\\n</Form>\\n\",\"paraId\":12,\"tocIndex\":0},{\"value\":\"某天你的经理说，我们的商品价格按规定不能超过 99 元，你要直接在表单上做限制。这个改动并不难：\",\"paraId\":13,\"tocIndex\":0},{\"value\":\"--  <InputNumber />\\n++  <InputNumber max={99} />\\n\",\"paraId\":14,\"tocIndex\":0},{\"value\":\"但是对于现有的商品，我们显然不能直接在表单上做限制。否则，用户在编辑商品的时候，就会发现自己的商品价格被改了。这显然是不合理的。\",\"paraId\":15,\"tocIndex\":0},{\"value\":\"（用户永远无法明白为什么后台的数据和看到的对不上了）\",\"paraId\":16,\"tocIndex\":0},{\"value\":\"实际上在很多场景下，组件都不应该直接修改实际值。尤其是输入型组件，擅自更改展示值会出现非常严重的后果。\",\"paraId\":17,\"tocIndex\":0},{\"value\":\"在组件库层面，我们不能“推测”用户的使用场景，因而需要以最保守的方式实现边界场景的处理。但是同时我们其实可以做一些优化手段。比如说将限制设置到 Form.Item 的 \",\"paraId\":18,\"tocIndex\":1},{\"value\":\"rules\",\"paraId\":18,\"tocIndex\":1},{\"value\":\" 上，利用表单校验能力来做限制：\",\"paraId\":18,\"tocIndex\":1},{\"value\":\"对于一些组件本身，也可以添加显式的样式提醒：\",\"paraId\":19,\"tocIndex\":1},{\"value\":\"对于非输入型自定义组件，也可以考虑通过设计来提醒用户。比如说我们可以在展示组件上添加一个 Tooltip：\",\"paraId\":20,\"tocIndex\":1},{\"value\":\"// Same demo we've seen before\\n<MyStr value=\\\"Hello World\\\" maxLen={5}>\\n\",\"paraId\":21,\"tocIndex\":1},{\"value\":\"或者使用一些其他的展示方式：\",\"paraId\":22,\"tocIndex\":1},{\"value\":\"在进行组件研发时，需要慎重处理边界场景。在大型项目中，上游使用者可能并不知道你的内部逻辑是如何处理的。因而随着复杂度以及使用场景的增加，我们更加推荐对于默认行为总是选择保守的处理方式。而对于不满足需求的情况，可以通过 HOC 的形式或者是一些额外的 Props 配置来实现，以防止开发者在使用时有过多的约定而不知。\",\"paraId\":23,\"tocIndex\":2}];\n  "],"names":[],"mappings":"qOAEe,6CAAA,QADN,YACA,IAAM,EAAQ,CAAC,CAAC,MAAQ,6aAA0E,OAAS,CAAC,EAAE,CAAC,MAAQ,wJAA0J,OAAS,CAAC,EAAE,CAAC,MAAQ,4EAAgB,OAAS,CAAC,EAAE,CAAC,MAAQ,cAAc,OAAS,CAAC,EAAE,CAAC,MAAQ,iFAAgB,OAAS,CAAC,EAAE,CAAC,MAAQ,kEAAkE,OAAS,CAAC,EAAE,CAAC,MAAQ,mJAA2B,OAAS,CAAC,EAAE,CAAC,MAAQ,2CAA6C,OAAS,CAAC,EAAE,CAAC,MAAQ,sEAAe,OAAS,CAAC,EAAE,CAAC,MAAQ,SAAS,OAAS,CAAC,EAAE,CAAC,MAAQ,oDAAY,OAAS,CAAC,EAAE,CAAC,MAAQ,QAAQ,OAAS,CAAC,EAAE,CAAC,MAAQ,iBAAO,OAAS,CAAC,EAAE,CAAC,MAAQ,cAAc,OAAS,CAAC,EAAE,CAAC,MAAQ,SAAI,OAAS,CAAC,EAAE,CAAC,MAAQ,+SAA0D,OAAS,CAAC,EAAE,CAAC,MAAQ,gDAAkD,OAAS,CAAC,EAAE,CAAC,MAAQ,6CAAU,OAAS,CAAC,EAAE,CAAC,MAAQ,YAAY,OAAS,CAAC,EAAE,CAAC,MAAQ,oGAAoB,OAAS,CAAC,EAAE,CAAC,MAAQ,yIAAyI,OAAS,EAAE,EAAE,CAAC,MAAQ,uOAAyC,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,4KAAoL,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,+QAAmD,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,sDAAsD,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,mYAAmE,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,+JAA6B,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,qTAAsD,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,+bAAuF,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,QAAQ,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,8FAAmB,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,uIAAyB,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,yRAAwD,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,4EAA6E,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,uFAAiB,OAAS,GAAG,SAAW,CAAC,EAAE,CAAC,MAAQ,q3BAAgK,OAAS,GAAG,SAAW,CAAC,EAAE"}