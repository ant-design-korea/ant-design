{"version":3,"sources":["components/upload/demo/avatar.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/upload/demo/avatar.tsx?watch=parent';import React, { useState } from 'react';\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Flex, message, Upload } from 'antd';\nimport type { GetProp, UploadProps } from 'antd';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\n\nconst getBase64 = (img: FileType, callback: (url: string) => void) => {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => callback(reader.result as string));\n  reader.readAsDataURL(img);\n};\n\nconst beforeUpload = (file: FileType) => {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('You can only upload JPG/PNG file!');\n  }\n  const isLt2M = file.size / 1024 / 1024 < 2;\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n  return isJpgOrPng && isLt2M;\n};\n\nconst App: React.FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState<string>();\n\n  const handleChange: UploadProps['onChange'] = (info) => {\n    if (info.file.status === 'uploading') {\n      setLoading(true);\n      return;\n    }\n    if (info.file.status === 'done') {\n      // Get this url from response in real world.\n      getBase64(info.file.originFileObj as FileType, (url) => {\n        setLoading(false);\n        setImageUrl(url);\n      });\n    }\n  };\n\n  const uploadButton = (\n    <button style={{ border: 0, background: 'none' }} type=\"button\">\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </button>\n  );\n\n  return (\n    <Flex gap=\"middle\" wrap>\n      <Upload\n        name=\"avatar\"\n        listType=\"picture-card\"\n        className=\"avatar-uploader\"\n        showUploadList={false}\n        action=\"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload\"\n        beforeUpload={beforeUpload}\n        onChange={handleChange}\n      >\n        {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} /> : uploadButton}\n      </Upload>\n      <Upload\n        name=\"avatar\"\n        listType=\"picture-circle\"\n        className=\"avatar-uploader\"\n        showUploadList={false}\n        action=\"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload\"\n        beforeUpload={beforeUpload}\n        onChange={handleChange}\n      >\n        {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} /> : uploadButton}\n      </Upload>\n    </Flex>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"uOA8EA,+CAAA,4BA9EO,oBAAyH,gBAClF,gBACR,YAKtC,IAAM,EAAY,CAAC,EAAe,KAChC,IAAM,EAAS,IAAI,WACnB,EAAO,gBAAgB,CAAC,OAAQ,IAAM,EAAS,EAAO,MAAM,GAC5D,EAAO,aAAa,CAAC,GACvB,EAEM,EAAe,AAAC,IACpB,IAAM,EAAa,AAAc,eAAd,EAAK,IAAI,EAAqB,AAAc,cAAd,EAAK,IAAI,CACrD,GACH,SAAO,CAAC,KAAK,CAAC,qCAEhB,IAAM,EAAS,EAAK,IAAI,CAAG,KAAO,KAAO,EAIzC,OAHK,GACH,SAAO,CAAC,KAAK,CAAC,gCAET,GAAc,EACvB,MAuDA,EArDsB,KACpB,GAAM,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAU,EAAY,CAAG,GAAA,UAAQ,IAElC,EAAwC,AAAC,IAC7C,GAAI,AAAqB,cAArB,EAAK,IAAI,CAAC,MAAM,CAAkB,CACpC,EAAW,CAAA,GACX,OACF,CACyB,SAArB,EAAK,IAAI,CAAC,MAAM,EAElB,EAAU,EAAK,IAAI,CAAC,aAAa,CAAc,AAAC,IAC9C,EAAW,CAAA,GACX,EAAY,GACd,GAEJ,EAEM,EACJ,WAAC,UAAO,MAAO,CAAE,OAAQ,EAAG,WAAY,MAAO,EAAG,KAAK,mBACpD,EAAU,UAAC,iBAAe,KAAM,UAAC,cAAY,KAC9C,UAAC,OAAI,MAAO,CAAE,UAAW,CAAE,WAAG,cAIlC,MACE,WAAC,MAAI,EAAC,IAAI,SAAS,IAAI,cACrB,UAAC,QAAM,EACL,KAAK,SACL,SAAS,eACT,UAAU,kBACV,eAAgB,CAAA,EAChB,OAAO,yDACP,aAAc,EACd,SAAU,WAET,EAAW,UAAC,OAAI,IAAK,EAAU,IAAI,SAAS,MAAO,CAAE,MAAO,MAAO,IAAQ,IAE9E,UAAC,QAAM,EACL,KAAK,SACL,SAAS,iBACT,UAAU,kBACV,eAAgB,CAAA,EAChB,OAAO,yDACP,aAAc,EACd,SAAU,WAET,EAAW,UAAC,OAAI,IAAK,EAAU,IAAI,SAAS,MAAO,CAAE,MAAO,MAAO,IAAQ,OAIpF"}