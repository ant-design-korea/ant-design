{"version":3,"sources":["components/table/demo/custom-filter-panel.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/table/demo/custom-filter-panel.tsx?watch=parent';import React, { useRef, useState } from 'react';\nimport { SearchOutlined } from '@ant-design/icons';\nimport type { InputRef, TableColumnsType, TableColumnType } from 'antd';\nimport { Button, Input, Space, Table } from 'antd';\nimport type { FilterDropdownProps } from 'antd/es/table/interface';\nimport Highlighter from 'react-highlight-words';\n\ninterface DataType {\n  key: string;\n  name: string;\n  age: number;\n  address: string;\n}\n\ntype DataIndex = keyof DataType;\n\nconst data: DataType[] = [\n  {\n    key: '1',\n    name: 'John Brown',\n    age: 32,\n    address: 'New York No. 1 Lake Park',\n  },\n  {\n    key: '2',\n    name: 'Joe Black',\n    age: 42,\n    address: 'London No. 1 Lake Park',\n  },\n  {\n    key: '3',\n    name: 'Jim Green',\n    age: 32,\n    address: 'Sydney No. 1 Lake Park',\n  },\n  {\n    key: '4',\n    name: 'Jim Red',\n    age: 32,\n    address: 'London No. 2 Lake Park',\n  },\n];\n\nconst App: React.FC = () => {\n  const [searchText, setSearchText] = useState('');\n  const [searchedColumn, setSearchedColumn] = useState('');\n  const searchInput = useRef<InputRef>(null);\n\n  const handleSearch = (\n    selectedKeys: string[],\n    confirm: FilterDropdownProps['confirm'],\n    dataIndex: DataIndex,\n  ) => {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  const handleReset = (clearFilters: () => void) => {\n    clearFilters();\n    setSearchText('');\n  };\n\n  const getColumnSearchProps = (dataIndex: DataIndex): TableColumnType<DataType> => ({\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters, close }) => (\n      <div style={{ padding: 8 }} onKeyDown={(e) => e.stopPropagation()}>\n        <Input\n          ref={searchInput}\n          placeholder={`Search ${dataIndex}`}\n          value={selectedKeys[0]}\n          onChange={(e) => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n          onPressEnter={() => handleSearch(selectedKeys as string[], confirm, dataIndex)}\n          style={{ marginBottom: 8, display: 'block' }}\n        />\n        <Space>\n          <Button\n            type=\"primary\"\n            onClick={() => handleSearch(selectedKeys as string[], confirm, dataIndex)}\n            icon={<SearchOutlined />}\n            size=\"small\"\n            style={{ width: 90 }}\n          >\n            Search\n          </Button>\n          <Button\n            onClick={() => clearFilters && handleReset(clearFilters)}\n            size=\"small\"\n            style={{ width: 90 }}\n          >\n            Reset\n          </Button>\n          <Button\n            type=\"link\"\n            size=\"small\"\n            onClick={() => {\n              confirm({ closeDropdown: false });\n              setSearchText((selectedKeys as string[])[0]);\n              setSearchedColumn(dataIndex);\n            }}\n          >\n            Filter\n          </Button>\n          <Button\n            type=\"link\"\n            size=\"small\"\n            onClick={() => {\n              close();\n            }}\n          >\n            close\n          </Button>\n        </Space>\n      </div>\n    ),\n    filterIcon: (filtered: boolean) => (\n      <SearchOutlined style={{ color: filtered ? '#1677ff' : undefined }} />\n    ),\n    onFilter: (value, record) =>\n      record[dataIndex]\n        .toString()\n        .toLowerCase()\n        .includes((value as string).toLowerCase()),\n    onFilterDropdownOpenChange: (visible) => {\n      if (visible) {\n        setTimeout(() => searchInput.current?.select(), 100);\n      }\n    },\n    render: (text) =>\n      searchedColumn === dataIndex ? (\n        <Highlighter\n          highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n          searchWords={[searchText]}\n          autoEscape\n          textToHighlight={text ? text.toString() : ''}\n        />\n      ) : (\n        text\n      ),\n  });\n\n  const columns: TableColumnsType<DataType> = [\n    {\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      width: '30%',\n      ...getColumnSearchProps('name'),\n    },\n    {\n      title: 'Age',\n      dataIndex: 'age',\n      key: 'age',\n      width: '20%',\n      ...getColumnSearchProps('age'),\n    },\n    {\n      title: 'Address',\n      dataIndex: 'address',\n      key: 'address',\n      ...getColumnSearchProps('address'),\n      sorter: (a, b) => a.address.length - b.address.length,\n      sortDirections: ['descend', 'ascend'],\n    },\n  ];\n\n  return <Table columns={columns} dataSource={data} />;\n};\n\nexport default App;\n"],"names":[],"mappings":"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"}