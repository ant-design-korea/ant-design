{"version":3,"sources":["components/table/demo/ajax.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/table/demo/ajax.tsx?watch=parent';import React, { useEffect, useState } from 'react';\nimport type { GetProp, TableProps } from 'antd';\nimport { Table } from 'antd';\nimport type { SorterResult } from 'antd/es/table/interface';\nimport qs from 'qs';\n\ntype ColumnsType<T extends object = object> = TableProps<T>['columns'];\ntype TablePaginationConfig = Exclude<GetProp<TableProps, 'pagination'>, boolean>;\n\ninterface DataType {\n  name: {\n    first: string;\n    last: string;\n  };\n  gender: string;\n  email: string;\n  login: {\n    uuid: string;\n  };\n}\n\ninterface TableParams {\n  pagination?: TablePaginationConfig;\n  sortField?: SorterResult<any>['field'];\n  sortOrder?: SorterResult<any>['order'];\n  filters?: Parameters<GetProp<TableProps, 'onChange'>>[1];\n}\n\nconst columns: ColumnsType<DataType> = [\n  {\n    title: 'Name',\n    dataIndex: 'name',\n    sorter: true,\n    render: (name) => `${name.first} ${name.last}`,\n    width: '20%',\n  },\n  {\n    title: 'Gender',\n    dataIndex: 'gender',\n    filters: [\n      { text: 'Male', value: 'male' },\n      { text: 'Female', value: 'female' },\n    ],\n    width: '20%',\n  },\n  {\n    title: 'Email',\n    dataIndex: 'email',\n  },\n];\n\nconst getRandomuserParams = (params: TableParams) => ({\n  results: params.pagination?.pageSize,\n  page: params.pagination?.current,\n  ...params,\n});\n\nconst App: React.FC = () => {\n  const [data, setData] = useState<DataType[]>();\n  const [loading, setLoading] = useState(false);\n  const [tableParams, setTableParams] = useState<TableParams>({\n    pagination: {\n      current: 1,\n      pageSize: 10,\n    },\n  });\n\n  const fetchData = () => {\n    setLoading(true);\n    fetch(`https://randomuser.me/api?${qs.stringify(getRandomuserParams(tableParams))}`)\n      .then((res) => res.json())\n      .then(({ results }) => {\n        setData(results);\n        setLoading(false);\n        setTableParams({\n          ...tableParams,\n          pagination: {\n            ...tableParams.pagination,\n            total: 200,\n            // 200 is mock data, you should read it from server\n            // total: data.totalCount,\n          },\n        });\n      });\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [\n    tableParams.pagination?.current,\n    tableParams.pagination?.pageSize,\n    tableParams?.sortOrder,\n    tableParams?.sortField,\n    JSON.stringify(tableParams.filters),\n  ]);\n\n  const handleTableChange: TableProps<DataType>['onChange'] = (pagination, filters, sorter) => {\n    setTableParams({\n      pagination,\n      filters,\n      sortOrder: Array.isArray(sorter) ? undefined : sorter.order,\n      sortField: Array.isArray(sorter) ? undefined : sorter.field,\n    });\n\n    // `dataSource` is useless since `pageSize` changed\n    if (pagination.pageSize !== tableParams.pagination?.pageSize) {\n      setData([]);\n    }\n  };\n\n  return (\n    <Table\n      columns={columns}\n      rowKey={(record) => record.login.uuid}\n      dataSource={data}\n      pagination={tableParams.pagination}\n      loading={loading}\n      onChange={handleTableChange}\n    />\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"uOA0HA,+CAAA,4CA1HO,oBAAiI,gBAElH,oBAEP,aAwBf,IAAM,EAAiC,CACrC,CACE,MAAO,OACP,UAAW,OACX,OAAQ,CAAA,EACR,OAAQ,AAAC,GAAS,CAAC,EAAE,EAAK,KAAK,CAAC,CAAC,EAAE,EAAK,IAAI,CAAC,CAAC,CAC9C,MAAO,KACT,EACA,CACE,MAAO,SACP,UAAW,SACX,QAAS,CACP,CAAE,KAAM,OAAQ,MAAO,MAAO,EAC9B,CAAE,KAAM,SAAU,MAAO,QAAS,EACnC,CACD,MAAO,KACT,EACA,CACE,MAAO,QACP,UAAW,OACb,EACD,CAEK,EAAsB,AAAC,QAClB,EACH,QAF8C,CACpD,OAAO,SAAE,EAAA,EAAO,UAAU,YAAjB,SAAA,EAAmB,QAAQ,CACpC,IAAI,SAAE,EAAA,EAAO,UAAU,YAAjB,SAAA,EAAmB,OAAO,CAChC,GAAG,CAAM,AACX,QAmEA,EAjEsB,SAgClB,EACA,EAhCF,GAAM,CAAC,EAAM,EAAQ,CAAG,GAAA,UAAQ,IAC1B,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAc,CAC1D,WAAY,CACV,QAAS,EACT,SAAU,EACZ,CACF,GAEM,EAAY,KAChB,EAAW,CAAA,GACX,MAAM,CAAC,0BAA0B,EAAE,SAAE,CAAC,SAAS,CAAC,EAAoB,IAAc,CAAC,EAChF,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,CAAC,CAAE,QAAA,CAAO,CAAE,IAChB,EAAQ,GACR,EAAW,CAAA,GACX,EAAe,CACb,GAAG,CAAW,CACd,WAAY,CACV,GAAG,EAAY,UAAU,CACzB,MAAO,GAGT,CACF,GACF,GACJ,QAEA,GAAA,WAAS,EAAC,KACR,IACF,EAAG,SACD,EAAA,EAAY,UAAU,YAAtB,SAAA,EAAwB,OAAO,SAC/B,EAAA,EAAY,UAAU,YAAtB,SAAA,EAAwB,QAAQ,OAChC,SAAA,EAAa,SAAS,OACtB,SAAA,EAAa,SAAS,CACtB,KAAK,SAAS,CAAC,EAAY,OAAO,EACnC,EAiBC,UAAC,OAAK,EACJ,QAAS,EACT,OAAQ,AAAC,GAAW,EAAO,KAAK,CAAC,IAAI,CACrC,WAAY,EACZ,WAAY,EAAY,UAAU,CAClC,QAAS,EACT,SArBwD,CAAC,EAAY,EAAS,SASpD,EAR5B,EAAe,CACb,WAAA,EACA,QAAA,EACA,UAAW,MAAM,OAAO,CAAC,GAAU,KAAA,EAAY,EAAO,KAAK,CAC3D,UAAW,MAAM,OAAO,CAAC,GAAU,KAAA,EAAY,EAAO,KAAK,AAC7D,GAGI,EAAW,QAAQ,YAAK,EAAA,EAAY,UAAU,YAAtB,SAAA,EAAwB,QAAQ,GAC1D,EAAQ,EAAE,EAEd,IAYF"}