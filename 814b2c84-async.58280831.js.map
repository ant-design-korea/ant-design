{"version":3,"sources":["components/upload/demo/picture-card.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/upload/demo/picture-card.tsx?watch=parent';import React, { useState } from 'react';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Image, Upload } from 'antd';\nimport type { GetProp, UploadFile, UploadProps } from 'antd';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\n\nconst getBase64 = (file: FileType): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n  });\n\nconst App: React.FC = () => {\n  const [previewOpen, setPreviewOpen] = useState(false);\n  const [previewImage, setPreviewImage] = useState('');\n  const [fileList, setFileList] = useState<UploadFile[]>([\n    {\n      uid: '-1',\n      name: 'image.png',\n      status: 'done',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n    {\n      uid: '-2',\n      name: 'image.png',\n      status: 'done',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n    {\n      uid: '-3',\n      name: 'image.png',\n      status: 'done',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n    {\n      uid: '-4',\n      name: 'image.png',\n      status: 'done',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n    {\n      uid: '-xxx',\n      percent: 50,\n      name: 'image.png',\n      status: 'uploading',\n      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\n    },\n    {\n      uid: '-5',\n      name: 'image.png',\n      status: 'error',\n    },\n  ]);\n\n  const handlePreview = async (file: UploadFile) => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj as FileType);\n    }\n\n    setPreviewImage(file.url || (file.preview as string));\n    setPreviewOpen(true);\n  };\n\n  const handleChange: UploadProps['onChange'] = ({ fileList: newFileList }) =>\n    setFileList(newFileList);\n\n  const uploadButton = (\n    <button style={{ border: 0, background: 'none' }} type=\"button\">\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </button>\n  );\n  return (\n    <>\n      <Upload\n        action=\"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload\"\n        listType=\"picture-card\"\n        fileList={fileList}\n        onPreview={handlePreview}\n        onChange={handleChange}\n      >\n        {fileList.length >= 8 ? null : uploadButton}\n      </Upload>\n      {previewImage && (\n        <Image\n          wrapperStyle={{ display: 'none' }}\n          preview={{\n            visible: previewOpen,\n            onVisibleChange: (visible) => setPreviewOpen(visible),\n            afterOpenChange: (visible) => !visible && setPreviewImage(''),\n          }}\n          src={previewImage}\n        />\n      )}\n    </>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"uOAqGA,+CAAA,4BArGO,oBAA+H,gBACzG,gBACC,YAK9B,IAAM,EAAY,AAAC,GACjB,IAAI,QAAQ,CAAC,EAAS,KACpB,IAAM,EAAS,IAAI,WACnB,EAAO,aAAa,CAAC,GACrB,EAAO,MAAM,CAAG,IAAM,EAAQ,EAAO,MAAM,EAC3C,EAAO,OAAO,CAAG,AAAC,GAAU,EAAO,GACrC,OAwFF,EAtFsB,KACpB,GAAM,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAC,CAAA,GACzC,CAAC,EAAc,EAAgB,CAAG,GAAA,UAAQ,EAAC,IAC3C,CAAC,EAAU,EAAY,CAAG,GAAA,UAAQ,EAAe,CACrD,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACR,IAAK,8EACP,EACA,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACR,IAAK,8EACP,EACA,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACR,IAAK,8EACP,EACA,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACR,IAAK,8EACP,EACA,CACE,IAAK,OACL,QAAS,GACT,KAAM,YACN,OAAQ,YACR,IAAK,8EACP,EACA,CACE,IAAK,KACL,KAAM,YACN,OAAQ,OACV,EACD,EAEK,EAAgB,MAAO,IACtB,EAAK,GAAG,EAAK,EAAK,OAAO,EAC5B,CAAA,EAAK,OAAO,CAAG,MAAM,EAAU,EAAK,aAAa,CAAY,EAG/D,EAAgB,EAAK,GAAG,EAAK,EAAK,OAAO,EACzC,EAAe,CAAA,GACjB,EAKM,EACJ,WAAC,UAAO,MAAO,CAAE,OAAQ,EAAG,WAAY,MAAO,EAAG,KAAK,mBACrD,UAAC,cAAY,KACb,UAAC,OAAI,MAAO,CAAE,UAAW,CAAE,WAAG,cAGlC,MACE,iCACE,UAAC,QAAM,EACL,OAAO,yDACP,SAAS,eACT,SAAU,EACV,UAAW,EACX,SAhBwC,CAAC,CAAE,SAAU,CAAW,CAAE,GACtE,EAAY,YAiBP,EAAS,MAAM,EAAI,EAAI,KAAO,IAEhC,GACC,UAAC,OAAK,EACJ,aAAc,CAAE,QAAS,MAAO,EAChC,QAAS,CACP,QAAS,EACT,gBAAiB,AAAC,GAAY,EAAe,GAC7C,gBAAiB,AAAC,GAAY,CAAC,GAAW,EAAgB,GAC5D,EACA,IAAK,OAKf"}