{"version":3,"sources":["components/upload/demo/upload-manually.tsx?techStack=react"],"sourcesContent":["import '/home/runner/work/ant-design/ant-design/components/upload/demo/upload-manually.tsx?watch=parent';import React, { useState } from 'react';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { Button, message, Upload } from 'antd';\nimport type { GetProp, UploadFile, UploadProps } from 'antd';\n\ntype FileType = Parameters<GetProp<UploadProps, 'beforeUpload'>>[0];\n\nconst App: React.FC = () => {\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n  const [uploading, setUploading] = useState(false);\n\n  const handleUpload = () => {\n    const formData = new FormData();\n    fileList.forEach((file) => {\n      formData.append('files[]', file as FileType);\n    });\n    setUploading(true);\n    // You can use any AJAX library you like\n    fetch('https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload', {\n      method: 'POST',\n      body: formData,\n    })\n      .then((res) => res.json())\n      .then(() => {\n        setFileList([]);\n        message.success('upload successfully.');\n      })\n      .catch(() => {\n        message.error('upload failed.');\n      })\n      .finally(() => {\n        setUploading(false);\n      });\n  };\n\n  const props: UploadProps = {\n    onRemove: (file) => {\n      const index = fileList.indexOf(file);\n      const newFileList = fileList.slice();\n      newFileList.splice(index, 1);\n      setFileList(newFileList);\n    },\n    beforeUpload: (file) => {\n      setFileList([...fileList, file]);\n\n      return false;\n    },\n    fileList,\n  };\n\n  return (\n    <>\n      <Upload {...props}>\n        <Button icon={<UploadOutlined />}>Select File</Button>\n      </Upload>\n      <Button\n        type=\"primary\"\n        onClick={handleUpload}\n        disabled={fileList.length === 0}\n        loading={uploading}\n        style={{ marginTop: 16 }}\n      >\n        {uploading ? 'Uploading' : 'Start Upload'}\n      </Button>\n    </>\n  );\n};\n\nexport default App;\n"],"names":[],"mappings":"uOAoEA,+CAAA,4BApEO,oBAAkI,gBAC1G,gBACS,YAkExC,EA7DsB,KACpB,GAAM,CAAC,EAAU,EAAY,CAAG,GAAA,UAAQ,EAAe,EAAE,EACnD,CAAC,EAAW,EAAa,CAAG,GAAA,UAAQ,EAAC,CAAA,GAyC3C,MACE,iCACE,UAAC,QAAM,EAhBT,SAAU,AAAC,IACT,IAAM,EAAQ,EAAS,OAAO,CAAC,GACzB,EAAc,EAAS,KAAK,GAClC,EAAY,MAAM,CAAC,EAAO,GAC1B,EAAY,GACd,EACA,aAAc,AAAC,IACb,EAAY,IAAI,EAAU,EAAK,EAExB,CAAA,GAET,SAAA,WAMI,UAAC,QAAM,EAAC,KAAM,UAAC,gBAAc,cAAK,kBAEpC,UAAC,QAAM,EACL,KAAK,UACL,QA9Ce,KACnB,IAAM,EAAW,IAAI,SACrB,EAAS,OAAO,CAAC,AAAC,IAChB,EAAS,MAAM,CAAC,UAAW,GAC7B,GACA,EAAa,CAAA,GAEb,MAAM,yDAA0D,CAC9D,OAAQ,OACR,KAAM,CACR,GACG,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,KACJ,EAAY,EAAE,EACd,SAAO,CAAC,OAAO,CAAC,wBAClB,GACC,KAAK,CAAC,KACL,SAAO,CAAC,KAAK,CAAC,kBAChB,GACC,OAAO,CAAC,KACP,EAAa,CAAA,GACf,GACJ,EAyBM,SAAU,AAAoB,IAApB,EAAS,MAAM,CACzB,QAAS,EACT,MAAO,CAAE,UAAW,EAAG,WAEtB,EAAY,YAAc,oBAInC"}